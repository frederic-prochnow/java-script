<html>
  <head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="css/style.css"/>
    <title>Welcome to BOOKS !</title>
    <script src='js/jquery-2.1.3.js'/>
    <script>
// IMPORTANT ! Otherwise the DOM is not yet created !
$(document).ready(function() {

}); // end document.ready
    </script>
  </head>
  <body>
    <h1>Bienvenue dans votre bibliothèque !</h1>
    <img src='img/books.jpg' width='200'/>
    <p>
        Sélectionnez l'action que vous souhaitez réaliser:
    </p>
    <div id='lister'>
        <li>Lister tous vos livres</li>
        <script>
        $('#lister').click(function (event) {
            $.ajax({
                // The URL for the request
                url: "books",
                // The data to send (will be converted to a query string)
                /*data: {
                    id: 1
                },*/
                // Whether this is a POST/GET/UPDATE/DELETE request
                type: "GET",
                // The type of data we expect back
                dataType : "json",
                // Code to run if the request succeeds;
                // the response is passed to the function
                success: function( json ) {
                    $("#afficher_lister").text(JSON.stringify(json));
                    //$("<h1>").text(json.title).appendTo("body");
                    $("<div class=\"content\">").html(json.html).appendTo("body");
                },
                // Code to run if the request fails; the raw request and
                // status codes are passed to the function
                error: function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                },
                // Code to run regardless of success or failure
                complete: function( xhr, status ) {
                    alert( "The request is complete!" );
                }
            });
        });
        </script>
    </div>
    <div id="afficher_lister">
    </div>
    <div id="ajouter">
        <li>Ajouter un nouveau livre.</li>
        <form>
        <input id="auteur" type="text" name="auteur" value="auteur">
        <input id="titre" type="text" name="titre" value="titre">
        <input type="submit" value="ajouter">
        </form >
        <script>
        $('#ajouter').click(function (event) {
            $.ajax({
                // The URL for the request
                url: "books",
                // The data to send (will be converted to a query string)
                data: {
                    author: $('#auteur').val(),
                    title: $('#titre').val()
                },
                // Whether this is a POST/GET/UPDATE/DELETE request
                type: "POST",
                // The type of data we expect back
                dataType : "json",
                // Code to run if the request succeeds;
                // the response is passed to the function
                success: function( json ) {
                    $("#afficher_ajouter").text(JSON.stringify(json));
                    //$("<h1>").text(json.title).appendTo("body");
                    $("<div class=\"content\">").html(json.html).appendTo("body");
                },
                // Code to run if the request fails; the raw request and
                // status codes are passed to the function
                error: function( xhr, status, errorThrown ) {
                    alert( "Sorry, there was a problem!" );
                    console.log( "Error: " + errorThrown );
                    console.log( "Status: " + status );
                    console.dir( xhr );
                },
                // Code to run regardless of success or failure
                complete: function( xhr, status ) {
                    alert( "The request is complete!" );
                }
            });
        });
        </script>
    </div>
    <div id="afficher_ajouter">
    </div>
    <div id="modifier">
        <li>Modifier un livre existant</li>
        <form>
        <input type="text" name="id" value="id">
        <input type="text" name="auteur" value="auteur">
        <input type="text" name="titre" value="titre">
        <input type="submit" value="modifier">
        </form>
    </div>
    <div id="supprimer">
        <li>Supprimer un livre existant</li>
        <form>
        <input type="text" name="id" value="id">
        <input type="submit" value="supprimer">
        </form>
    </div>
  </body>
</html>
